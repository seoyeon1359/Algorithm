<h2>2156번 포도주 시식</h2>



<h2>얍문 블로그 참조</h2>



간단한 예시를 통해서 , 포도주를 어떻게 마셨을 때, 가장 최대로 마실 수 있는지 알아보자

5개의 포도주 잔이 있고, 그 5개의 잔에 들어있는 포도주의 양이 [1,2,3,4,5] 라고 가정해보자

그럼 이때, 마실 수 있는 최대양을 구해보자

우리가 생각해줘야 할 조건은 딱 한 가지가 있다. 바로 "연속한 3잔을 모두 마실 수는 없다" 이다.

그럼 지금부터는 포도주를 앞에서 부터 순서대로 마셔볼건데 무조건 마시는 상황이 아니라

"x번째 잔 까지 왔을 때, 마실 수 있는 포도주의 최대양"을 기준으로 생각을 해보자

즉  내가 현재 x번째 잔까지 왔는데, 이 x번째 잔을 무조건 마셨다고 가정하고 최댓값을 구하는것이 아니라, x번째 잔까지 왔을때의 최댓값을 구해보자 왜냐하면 x번째 잔까지 왔을 때 해당 포도주 잔을 무조건 마시는 경우가 최대가 아니라 마시지 않았을 때 최댓값이 되는 경우도 존재하기 때문이다.



그럼 첫 번째 포도주 잔부터 알아보자. = 첫번째 잔까지 왔을때, 마실 수 있는 포도주의 최대 양

당연히 1이다. 왜?? 첫 번째 포도주 잔 이전에는 그 어떤 포도주 잔이 없기 때문에 이전까지 마신 포도주의 최대양은 0이라 생각할수있다. 그렇기 때문에 첫번째 잔까지 왔을 떄 마실 수 있는 포도주의 최대 양은 무조건 첫 번째 포도주 잔을 마셨을 떄 얻을 수 있는 양인 1이된다.

[첫번째 포도주까지 마실 수 있는 포도주의 최대 양 =1]



두번째 포도주 잔을 알아보자 - "두번 째 잔까지 왔을때, 마실 수 있는 포도주의 최대 양"

먼저 두 번째 잔까지 오는 경우를 한번 생각해보자

   1.첫번째 잔을 마시고 ->두번째 잔으로 오는 경우

2. 첫 번째 잔을 마시지 않고 -> 두 번째 잔으로 오는 경우

이렇게 2가지 경우가 존재한다. 보다 정확하게 말하자면, 총 4가지 경우가 발생한다. 즉! 위의 2가지 경우에서 각 경우마다 두 번째 잔을 마시는 경우와 마시지 않는 경우가 존재하기 때문에 보다 정확하게 말하자면 총 4가지 경우가 발생하는것이다.

그런데 ! 과연 두번째 잔을 계산해야 하는 상황에서 "두번째 잔을 마시지 않는 경우"를 생각해주어야 할까? 생각해줄 필요가 없다 왜냐면 문제에서 제시된 조건인 "연속된 3잔은 모두 마실 수 없다"에 아무런 영향을 미치지 않기 때문이다.이 두번쨰 잔을 마심으로 인해서, "연속된 3잔을 모두 마시게 되므로 조건에 위배된다"라는 상황이 발생한다면, 마시는 경우와 마시지 않는 경우를 구분해서 계산을 하겠는데 기껏 해봤자 이제 두 번째 잔이다. 첫번쨰 잔을 마시든 안마시든 두번쨰 잔을 마시든 안마시든 상관없이 절대로 연속된 3잔을 모두 마실수없다라는 조건에 위배되지가 않는다. 그래서 위와 같이 적어놓았다.

위의 2가지 경우 모두, 조건에 위배되지 않는다. 즉 ! 위의 2가지 경우 중에서 더 큰 값이 바로 두 번째 잔 까지 왔을 때, 마실 수 있는 포도주의 최대양이 될 것이다.

계산을 해보면 첫 번째 경우는 1 + 2 = 3 이 되고 , 두 번째 경우는 2 가 된다. 따라서, 첫 번째 경우처럼 마셨을 경우, '3'이라는 최대값을 구할 수 있다. 그런데 ! 사실 위에서 말한 2가지 경우 중에, 두 번째 경우는 고려를 해볼 필요도 없다.

왜냐하면 포도주의 양은 1000이하의 음이 아닌 정수이기 때문에, 최소 0이라는 것을 의미한다.

즉 ! 첫 번째 잔을 마시고 두 번째 잔을 마시는 경우가 무.조.건 첫 번째 잔을 마시지 않고 두 번째 잔으로 바로오는 경우보다 크거나 같아진다.

*[ 두 번째 포도주 까지 마실 수 있는 포도주의 최대양 = 3 ]*



세번째 포도주 잔을 알아보자 -"세 번째 잔까지 왔을 때, 마실 수 있는 포도주의 최대 양"

세번째 포도주 잔은 위에서 이야기 한 첫 번째, 두번째 포도주 잔들과는 조금 다른 이야기를 시작한다.

처음으로 조건을 생각해줘야 하는 포도주 잔이기 때문이다.

먼저, 세번째 잔까지 왔을 때 마실 수 있는 경우를 생각해보자. 말로 하나하나 적으면 너무 기니까 	

간단하게 O X 로만 표시를 해보자

1. OOX
2. OXO
3. XOO
4. XOX
5. XXO
6. OXX
7. XXX

첫 번째 경우 얻을 수 있는 포도주의 양 = 1 + 2 = 3

두 번째 경우 얻을 수 있는 포도주의 양 = 1 + 3 = 4

세 번째 경우 얻을 수 있는 포도주의 양 = 2 + 3 = 5

네 번째 경우 얻을 수 있는 포도주의 양 = 2

다섯 번째 경우 얻을 수 있는 포도주의 양 = 3

여섯 번째 경우 얻을 수 있는 포도주의 양 = 1

일곱 번째 경우 얻을 수 있는 포도주의 양 = 0

위의 값들을 비교하면 XOO로 마셨을 경우 최대 5를 마실 수 있다. 그런데 이렇게 다 비교를 할수가 없다.네번째와 다섯번째로가면 갈수록 점점더 경우의 수가 많아질텐데 이렇게 하나하나 비교를 할수는 없다. 그래서 위의 경우들에서 딱히 비교해보지 않아도 되는 공통된 특징을 가지는 놈들끼리 한번 묶어보자

{ 1 , 4 , 6 , 7 } 번 Case.

본인은 가장 먼저 위의 4가지 Case를 하나로 묶어 보았다. 공통점을 찾아보면, 모두 "세 번째 잔을 마시지 않는 경우" 라는 것이다. 이 Case들은 3번째 잔을 마시지 않기 때문에 어쩌면 문제의 조건에 위배될 상황이 절대로 발생하지 않을 놈들이다.

그리고 1 , 4 , 6 , 7 번 Case들 중에서 최댓값을 찾아보면, 1번 Case인 O O X가 '3'으로 최댓값이 되는데, 이 값은 "두 번째 잔 까지 왔을 때 마실 수 있는 포도주의 최대양"을 의미한다. **즉 ! "내가 현재 x번째 잔까지 왔을 때, x번째 잔을 마시지 않는다고 가정한다면, 이 때 얻을 수 있는 포도주의 최대양은 x - 1번째 포도주잔까지 왔을 때 마실 수 있는 포도주의 최대 양" 이 된다는 것이다.**

위의 한 마디 문장으로 , { 1 , 4 , 6 , 7 } 4개의 Case를 하나로 추려내서 계산을 할 수가 있다.

즉 ! **내가 현재 N번째 잔일 때, N번째 잔을 마시지 않는다고 가정할 경우, 마실 수 있는 포도주의 최대양은 N - 1번째 잔까지 왔을 때 마실 수 있는 포도주의 최대양 과 같다 !**



그럼 계산하지 않은 {2,3,5}번 case들을 보자. 이 Case들의 공통점이 '세번째 잔을 마시는 경우'라는 것이다.

2번 Case는 O X O 로, 두 번째 포도주 잔을 마시지 않은 경우이다.

3번 Case는 X O O 로, 첫 번째 포도주 잔을 마시지 않은 경우이다.

5번 Case는 X X O 로, 첫 번째, 두 번째 포도주 잔을 모두 마시지 않은 경우이다.

이 상황에서 가장 마지막에 'O'로 체크된 포도주 잔을 N 번째 잔이라고 가정하고, 위의 3가지 Case들을 계산해보자.

1번 Case = N - 2번째 잔까지 왔을 때, 마실 수 있는 포도주 양의 최댓값 + N번째 포도주의 양

2번 Case = N - 3번째 잔까지 왔을 때, 마실 수 있는 포도주의 양의 최댓값 + N - 1번째 포도주의 양 + N번째 포도주의 양

3번 Case = N - 3번째 잔까지 왔을 때, 마실 수 있는 포도주의 양의 최댓값 + N번째 포도주의 양



이렇게 정리를 할 수가 있다. 그런데 3번 Case를 주목해보자. 최댓값이 될 가능성이 있는 놈일까 ?? 절대로 없는 놈이다. 왜 ?? 2번 Case에서 N - 1번째 포도주의 양 만큼을 안 마시고 버린 경우와 똑같기 때문이다. 포도주의 양의 최솟값은 0이기 때문에 마실 수 있다면 무조건 마시는게 최댓값에 영향을 미칠 것이다. 그런데, 2번 Case 처럼 마실 수도 있는 포도주 잔인데도, 굳이 마시지 않고 버려놓고, 2번 Case보다 큰 값이 발생할 수 있을까 ?? 절대로 그럴 수가 없다. 즉 ! 3번 Case는 비교할 필요가 없다.



그리고 여기서 정리를 해보자. **내가 현재 N번째 잔 까지 왔을 때, N번째 잔을 마신다고 가정했을 때, 마실 수 있는 포도주의 최대양은 'N - 2번째 잔까지 마셨을 때 얻을 수 있는 최대 양 + N번째 잔을 마셨을 때 얻을 수 있는 포도주의 양 ' & 'N - 3번째 잔 까지 마셨을 때 얻을 수 있는 최대 양 + N - 1번째 포도주의 양 + N번째 포도주의 양' 중 더 큰 값**이 된다.



그럼 ! a번째 잔 까지 왔을 때, 얻을 수 있는 포도주의 최대양은 b 이다 라는 것을 DP[a] = b 라는 식으로 표현해보자.

DP[1] = Arr[1] 이 될 것이고 , DP[2] = Arr[1] + Arr[2] 가 될 것이다. 이 경우, DP[N]의 값을 구해보면..

DP[N] = Max(DP[N - 3] + Arr[N - 1] + Arr[N] , DP[N - 2] + Arr[N] , DP[N - 1]) 이 된다.

마시지 않는 경우 발생할 수 있는 1가지와, 마시는 경우 발생할 수 있는 2가지 경우, 총 3가지 경우 중 최댓값이 N번째 잔까지 왔을 때, 마실 수 있는 포도주의 최대양이 된다.



```c++
 
void Solution()
{
    DP[1] = Arr[1];
    DP[2] = DP[1] + Arr[2];
    for (int i = 3; i <= N; i++)
    {
        DP[i] = Max(DP[i - 3] + Arr[i - 1] + Arr[i], DP[i - 2] + Arr[i]);
        DP[i] = Max(DP[i - 1], DP[i]);
    }
    cout << DP[N] << endl;
}
```

